function tokenizer(d,c){function b(e){return e!="\n"&&/^[\s\u00a0]*$/.test(e)}var a={state:c,take:function(e){if(typeof(e)=="string"){e={style:e,type:e}}e.content=(e.content||"")+d.get();if(!/\n$/.test(e.content)){d.nextWhile(b)}e.value=e.content+d.get();return e},next:function(){if(!d.more()){throw StopIteration}var e;if(d.equals("\n")){d.next();return this.take("whitespace")}if(d.applies(b)){e="whitespace"}else{while(!e){e=this.state(d,function(f){a.state=f})}}return this.take(e)}};return a};