Ext.namespace("AuIt.Action.Editor","AuIt.Action.Css","AuIt.Action.Widget","AuIt.Action.Element");AuIt.Action.Editor.Base=Ext.extend(AuIt.Action.Base,{actionGroup:"EDITOR",disabled:true,value:1,getEditCmd:function(){return this.itemId.substr(4).toLowerCase()},quest:function(a,c,b){this.actionMgr.quest(this,a,c,b)},executeCmd:function(){var c=this;if(c.enableToggle){if(!c.actionMgr.isProxy){c.value=!c.isPressed()}}c.editor=null;if(c.actionMgr.fireEvent("beforecmd",c)&&c.editor){var a=c.editor;if(c.actionMgr.isProxy){a.focus();c.beforeCmd(a);var b=c.getEditCmd();a.execCmd(b,c.data.value);c.afterCmd(a);c.actionMgr.fireEvent("aftercmd",c,{});c.actionMgr.updateState();c.editor=null;a.deferFocus()}else{c.data={value:c.value};c.actionMgr.postMessage(c,a.proxy)}}},updateState:function(b){if(b.proxyStates){var a=true;var c=b.proxyStates[this.itemId];if(b.opt.isEditable&&c){a=!c.editEnabled;this.state=c.state}if(!a&&this.enableToggle){this.items.each(function(d){d.toggle(this.state)},this)}if(!a&&this.multichar&&b.opt.collapsed){a=true}this.setDisabled(a)}else{}},sortEditorMenu:function(b){b.sort(function(d,c){if(d.text==c.text){return 0}return(d.text<c.text?-1:1)});for(var a=0;a<b.length;a++){if(b[a].menu){this.sortEditorMenu(b[a].menu)}}}});AuIt.Action.Editor.BlockCmd=Ext.extend(AuIt.Action.Editor.Base,{beforeCmd:function(a){var b=a.getSelection().getNode();if(!b.getParentBlockNode()){a.execCmd("FORMATBLOCK","p");a.getActiveBlock().getEl().createFirstMarker()}else{a.getActiveBlock().getEl().createFirstMarker()}},afterCmd:function(a){a.getActiveBlock().getEl().removeFirstMarker()}});AuIt.Action.Editor.CMD_INSERTHTML={baseClass:AuIt.Action.Editor.Base,baseClass:AuIt.Action.Editor.Base,itemId:"CMD_INSERTHTML"};AuIt.Action.Editor.CMD_BOLD={baseClass:AuIt.Action.Editor.Base,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_BOLD",tooltip:AuIt.locale.CMD_BOLD,iconCls:"edit-cmd-bold-16",beforeCmd:function(a){},afterCmd:function(a){}};AuIt.Action.Editor.CMD_ITALIC={baseClass:AuIt.Action.Editor.Base,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_ITALIC",iconCls:"edit-cmd-italic-16",tooltip:AuIt.locale.CMD_ITALIC};AuIt.Action.Editor.CMD_UNDERLINE={baseClass:AuIt.Action.Editor.Base,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_UNDERLINE",iconCls:"edit-cmd-underline-16",tooltip:AuIt.locale.CMD_UNDERLINE};AuIt.Action.Editor.CMD_INCREASEFONTSIZE={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_INCREASEFONTSIZE",iconCls:"edit-cmd-increasefontsize-16",tooltip:AuIt.locale.CMD_INCREASEFONTSIZE,beforeCmd:function(a){this.itemId="CMD_HILITECOLOR";this.data={value:"#ffffa8"}},afterCmd:function(a){var b=a.getContentElm();if(!b){return}Ext.each(b.query("span{backgroundColor}"),function(g){var d=AuIt.Editor.utils.rgbToColor(g.style.backgroundColor);if(d!="#ffffa8"){return}g.style.backgroundColor="";var c=window.parent.getComputedStyle(g,null);var f=c.fontSize;g.style.fontSize=AuIt.Editor.utils.FontInc(f)})}};AuIt.Action.Editor.CMD_DECREASEFONTSIZE={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_DECREASEFONTSIZE",iconCls:"edit-cmd-decreasefontsize-16",tooltip:AuIt.locale.CMD_DECREASEFONTSIZE,beforeCmd:function(a){this.itemId="CMD_HILITECOLOR";this.data={value:"#ffffa8"}},afterCmd:function(a){var b=a.getContentElm();if(!b){return}Ext.each(b.query("span{backgroundColor}"),function(g){var d=AuIt.Editor.utils.rgbToColor(g.style.backgroundColor);if(d!="#ffffa8"){return}g.style.backgroundColor="";var c=window.parent.getComputedStyle(g,null);var f=c.fontSize;g.style.fontSize=AuIt.Editor.utils.FontDec(f)})}};AuIt.Action.Editor.CMD_BACKCOLOR={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_BACKCOLOR",iconCls:"edit-cmd-backcolor-16",tooltip:AuIt.locale.CMD_BACKCOLOR};AuIt.Action.Editor.CMD_REMOVEFORMAT={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_REMOVEFORMAT",iconCls:"edit-cmd-removeformat-16",tooltip:AuIt.locale.CMD_REMOVEFORMAT};AuIt.Action.Editor.CMD_SELECTALL={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_SELECTALL",iconCls:"edit-cmd-selectall-16",tooltip:AuIt.locale.CMD_SELECTALL};AuIt.Action.Editor.CMD_STRIKETHROUGH={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_STRIKETHROUGH",iconCls:"edit-cmd-strikethrough-16",tooltip:AuIt.locale.CMD_STRIKETHROUGH};AuIt.Action.Editor.CMD_SUPERSCRIPT={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_SUPERSCRIPT",iconCls:"edit-cmd-superscript-16",tooltip:AuIt.locale.CMD_SUPERSCRIPT};AuIt.Action.Editor.CMD_SUBSCRIPT={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_SUBSCRIPT",iconCls:"edit-cmd-subscript-16",tooltip:AuIt.locale.CMD_SUBSCRIPT};AuIt.Action.Editor.CMD_FORECOLOR={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_FORECOLOR",iconCls:"edit-cmd-forecolor-16",tooltip:AuIt.locale.CMD_FORECOLOR,clickEvent:"mousedown",value:"",setColor:function(a){this.items.each(function(b){if(b.menu&&b.menu.palette){b.menu.palette(a)}b.toggle(this.state)},this)},initComponent:function(){this.baseHandler=this.handler;this.handler=function(){};this.menu=new Ext.menu.ColorMenu({allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,width:190,listeners:{scope:this,select:function(c,a){var b=this.baseAction;if(!b.colorMenu){b.colorMenu=c;return}b.value=Ext.isWebKit||Ext.isIE?"#"+a:a;b.value="#"+a;this.baseHandler()}},clickEvent:"mousedown"});this.constructor.superclass.initComponent.call(this)},updateState:function(a){AuIt.Action.Editor.Base.prototype.updateState.call(this,a);if(this.colorMenu&&this.value){}},beforeCmd:function(a){},afterCmd:function(a){}};AuIt.Action.Editor.CMD_JUSTIFYLEFT={baseClass:AuIt.Action.Editor.BlockCmd,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_JUSTIFYLEFT",iconCls:"edit-cmd-justifyleft-16",tooltip:AuIt.locale.CMD_JUSTIFYLEFT};AuIt.Action.Editor.CMD_JUSTIFYRIGHT={baseClass:AuIt.Action.Editor.BlockCmd,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_JUSTIFYRIGHT",iconCls:"edit-cmd-justifyright-16",tooltip:AuIt.locale.CMD_JUSTIFYRIGHT};AuIt.Action.Editor.CMD_JUSTIFYCENTER={baseClass:AuIt.Action.Editor.BlockCmd,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_JUSTIFYCENTER",iconCls:"edit-cmd-justifycenter-16",tooltip:AuIt.locale.CMD_JUSTIFYCENTER};AuIt.Action.Editor.CMD_JUSTIFYFULL={baseClass:AuIt.Action.Editor.BlockCmd,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_JUSTIFYFULL",iconCls:"edit-cmd-justifyfull-16",tooltip:AuIt.locale.CMD_JUSTIFYFULL};AuIt.Action.Editor.CMD_INSERTUNORDEREDLIST={baseClass:AuIt.Action.Editor.BlockCmd,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_INSERTUNORDEREDLIST",iconCls:"edit-cmd-insertunorderedlist-16",tooltip:AuIt.locale.CMD_INSERTUNORDEREDLIST,afterCmd:function(a){if(!this.data.value){try{var c=a.getSelection().getNode();var b=c.findParent("UL");if(b){Ext.fly(b).addClass("std")}}catch(d){}}}};AuIt.Action.Editor.CMD_INSERTORDEREDLIST={baseClass:AuIt.Action.Editor.BlockCmd,disabled:true,enableToggle:true,pressed:false,itemId:"CMD_INSERTORDEREDLIST",iconCls:"edit-cmd-insertorderedlist-16",tooltip:AuIt.locale.CMD_INSERTORDEREDLIST,afterCmd:function(a){if(!this.data.value){try{var c=a.getSelection().getNode();var b=c.findParent("OL");if(b){Ext.fly(b).addClass("std")}}catch(d){}}}};AuIt.Action.Editor.CMD_OUTDENT={baseClass:AuIt.Action.Editor.BlockCmd,disabled:true,tooltip:AuIt.locale.CMD_OUTDENT,itemId:"CMD_OUTDENT",iconCls:"edit-cmd-outdent-16"};AuIt.Action.Editor.CMD_INDENT={baseClass:AuIt.Action.Editor.BlockCmd,disabled:true,itemId:"CMD_INDENT",iconCls:"edit-cmd-indent-16",tooltip:AuIt.locale.CMD_INDENT,afterCmd:function(a){if(!this.data.value){var c=a.getSelection().getNode();while(1){var b=c.findParentNode("BLOCKQUOTE");if(!b){break}Ext.fly(b).addClass("std");sel=b}}}};AuIt.Action.Editor.FormatCmd=Ext.extend(AuIt.Action.Editor.Base,{disabled:true,beforeCmd:function(a){this.itemId="CMD_FORMATBLOCK";this.value=this.initialConfig.value},updateState:function(b){if(b.proxyStates){var a=true;var c=b.proxyStates[this.itemId];if(b.opt.isEditable&&c){a=!c.editEnabled;this.state=(c.value==this.initialConfig.value);this.items.each(function(d){d.toggle(this.state)},this)}this.setDisabled(a)}else{this.itemId="CMD_FORMATBLOCK";this.value=this.initialConfig.value;AuIt.Action.Editor.FormatCmd.superclass.updateState.call(this,b)}}});AuIt.Action.Editor.CMD_FORMAT_H1={baseClass:AuIt.Action.Editor.FormatCmd,itemId:"CMD_FORMATBLOCK_H1",value:"h1",text:"<h1>H1</h1>",tooltip:AuIt.locale.CMD_FORMAT_H_TIP};AuIt.Action.Editor.CMD_FORMAT_H2={baseClass:AuIt.Action.Editor.FormatCmd,itemId:"CMD_FORMATBLOCK_H2",value:"h2",text:"<h2>H2</h2>",tooltip:AuIt.locale.CMD_FORMAT_H_TIP};AuIt.Action.Editor.CMD_FORMAT_H3={baseClass:AuIt.Action.Editor.FormatCmd,itemId:"CMD_FORMATBLOCK_H3",value:"h3",text:"<h3>H3</h3>",tooltip:AuIt.locale.CMD_FORMAT_H_TIP};AuIt.Action.Editor.CMD_FORMAT_H4={baseClass:AuIt.Action.Editor.FormatCmd,itemId:"CMD_FORMATBLOCK_H4",value:"h4",text:"<h4>H4</h4>",tooltip:AuIt.locale.CMD_FORMAT_H_TIP};AuIt.Action.Editor.CMD_FORMAT_H5={baseClass:AuIt.Action.Editor.FormatCmd,itemId:"CMD_FORMATBLOCK_H5",value:"h5",text:"<h5>H5</h5>",tooltip:AuIt.locale.CMD_FORMAT_H_TIP};AuIt.Action.Editor.CMD_FORMAT_H6={baseClass:AuIt.Action.Editor.FormatCmd,itemId:"CMD_FORMATBLOCK_H6",value:"h6",text:"<h6>H6</h6>",tooltip:AuIt.locale.CMD_FORMAT_H_TIP};AuIt.Action.Editor.CMD_FORMAT_PAR={baseClass:AuIt.Action.Editor.FormatCmd,itemId:"CMD_FORMATBLOCK_P",value:"p",text:"<b>P</b>",tooltip:AuIt.locale.CMD_FORMAT_PAR_TIP};AuIt.Action.Editor.CMD_FORMAT_PRE={baseClass:AuIt.Action.Editor.FormatCmd,itemId:"CMD_FORMATBLOCK_PRE",value:"pre",colspan:2,text:"<b>PRE</b>",tooltip:AuIt.locale.CMD_FORMAT_PRE_TIP};AuIt.Action.Editor.INTERN_GETBLOCKDATA={baseClass:AuIt.Action.Editor.Base,itemId:"INTERN_GETBLOCKDATA",executeCmd:function(){if(this.actionMgr.isProxy){this.editor=null;if(this.actionMgr.fireEvent("beforecmd",this)&&this.editor){var b=this.editor.getActiveBlock();if(b){var a={itemId:"TRANSLATE_HTML_TO_LOCAL",_data:[],addSaveData:function(c){this._data=c}};b.addSaveDataLocal(a)}this.data=a._data}this.editor=null;this.answer()}}};AuIt.Action.Editor.INTERN_SETBLOCKDATA={baseClass:AuIt.Action.Editor.Base,itemId:"INTERN_SETBLOCKDATA",executeCmd:function(){this.editor=null;if(this.actionMgr.fireEvent("beforecmd",this)&&this.editor){if(this.actionMgr.isProxy){var a=this.editor.getActiveBlock();if(a){a.setHTML(this.data.xhtml)}}else{this.actionMgr.postMessage(this,this.editor.proxy)}}this.editor=null}};AuIt.Action.Editor.INTERN_AFTERCMD={baseClass:AuIt.Action.Editor.Base,itemId:"INTERN_AFTERCMD",executeCmd:function(a){if(this.actionMgr.isProxy){var b=this.actionMgr.getAction(this.data.cmd,this.data.modul);this.actionMgr.fireEvent("aftercmd",b,this.data.response)}else{this.actionMgr.postMessage(this,a)}}};AuIt.Action.Editor.INTERN_SETHTMLATTRIBUTE={baseClass:AuIt.Action.Editor.Base,itemId:"INTERN_SETHTMLATTRIBUTE",executeCmd:function(a){if(this.actionMgr.isProxy){this.actionMgr.fireEvent("cmd",this);this.answer()}}};AuIt.Action.Editor.INTERN_SETHTMLEVENTS={baseClass:AuIt.Action.Editor.Base,itemId:"INTERN_SETHTMLEVENTS",executeCmd:function(a){if(this.actionMgr.isProxy){this.actionMgr.fireEvent("cmd",this);this.answer()}}};AuIt.Action.Editor.INTERN_SETHTMLCSS={baseClass:AuIt.Action.Editor.Base,itemId:"INTERN_SETHTMLCSS",executeCmd:function(a){if(this.actionMgr.isProxy){this.actionMgr.fireEvent("cmd",this);this.answer()}}};AuIt.Action.Editor.INTERN_DOMINFO={baseClass:AuIt.Action.Editor.Base,itemId:"INTERN_DOMINFO",executeCmd:function(a){if(this.actionMgr.isProxy){this.actionMgr.fireEvent("cmd",this);this.answer()}}};AuIt.Action.Editor.INTERN_PAGEPART_ADD={baseClass:AuIt.Action.Editor.Base,itemId:"INTERN_PAGEPART_ADD",executeCmd:function(a){if(this.actionMgr.isProxy){this.actionMgr.fireEvent("cmd",this);this.answer()}}};AuIt.Action.Editor.CMD_SOURCEEDIT={baseClass:AuIt.Action.Editor.Base,disabled:true,tooltip:AuIt.locale.CMD_SOURCEEDIT,itemId:"CMD_SOURCEEDIT",iconCls:"edit-cmd-sourcedit-16",updateState:function(b){var a=true;if(b.opt){a=!b.opt.isEditable}this.setDisabled(a)},executeCmd:function(){var b=this;b.editor=null;if(b.actionMgr.fireEvent("beforecmd",b)&&b.editor){var a=new AuIt.Editor.dlg.HTMLEditor({id:"AuIt.Editor.dlg.HTMLEditor_1",editor:b.editor});a.show()}}};AuIt.Action.Editor.CMD_REDO={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_REDO",tooltip:AuIt.locale.CMD_REDO,iconCls:"edit-cmd-redo-16",executeCmd:function(){var b=this;b.editor=null;if(b.actionMgr.fireEvent("beforecmd",b)&&b.editor){var a=b.editor;if(this.actionMgr.isProxy){a.onRedo();b.actionMgr.fireEvent("aftercmd",b,{});b.actionMgr.updateState();b.editor=null;a.deferFocus()}else{b.actionMgr.postMessage(b,a.proxy)}}}};AuIt.Action.Editor.CMD_UNDO={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_UNDO",iconCls:"edit-cmd-undo-16",tooltip:AuIt.locale.CMD_UNDO,executeCmd:function(){var b=this;b.editor=null;if(b.actionMgr.fireEvent("beforecmd",b)&&b.editor){var a=b.editor;if(this.actionMgr.isProxy){a.onUndo();b.actionMgr.fireEvent("aftercmd",b,{});b.actionMgr.updateState();b.editor=null;a.deferFocus()}else{b.actionMgr.postMessage(b,a.proxy)}}}};AuIt.Action.Editor.SHOWOMS={baseClass:AuIt.Action.Editor.Base,disabled:true,enableToggle:true,pressed:true,itemId:"SHOWOMS",tooltip:AuIt.locale.SHOWOMS,iconCls:"block-showoms-24",executeCmd:function(){var b=this;b.editor=null;if(b.actionMgr.fireEvent("beforecmd",b)&&b.editor){if(this.actionMgr.isProxy){var a=this.actionMgr;a.fireEvent("cmd",this)}else{b.data={value:b.isPressed()};b.actionMgr.postMessage(b,b.editor.proxy)}}b.editor=null},updateState:function(){if(this.isDisabled()){this.setDisabled(false)}}};AuIt.Action.Editor.CMD_INSERTIMAGE={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_INSERTIMAGE",iconCls:"edit-cmd-insertimage-16",tooltip:AuIt.locale.CMD_INSERTIMAGE,handler:function(){var a=this.baseAction;if(a.actionMgr.fireEvent("beforecmd",a)){AuIt.Editor.fileBrowser.show(this,{directive:"{{media url=''}}",onApply:function(c){var b=c[0].url;b+="##"+encodeURIComponent(c[0].directive)+"##";a.value=b;a.executeCmd()}})}}};AuIt.Action.Editor.CMD_CREATELINK={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_CREATELINK",iconCls:"edit-cmd-createlink-16",tooltip:AuIt.locale.CMD_CREATELINK,handler:function(){var a=this.baseAction;if(a.actionMgr.fireEvent("beforecmd",a)){AuIt.Editor.Dialog.link(this,{directive:"##GOHOME##",baseAction:a,onApply:function(d,c){var e=c.baseAction;var b=d[0].url;b+="##"+encodeURIComponent(d[0].directive)+"##";e.value=b;e.executeCmd()}})}},afterCmd:function(a){a.getActiveBlock().initAnker()}};AuIt.Action.Editor.CMD_UNLINK={baseClass:AuIt.Action.Editor.Base,disabled:true,itemId:"CMD_UNLINK",iconCls:"edit-cmd-unlink-16",tooltip:AuIt.locale.CMD_UNLINK,beforeCmd:function(c){var b,d=c.getSelection().getNode();if(d&&(b=d.findParent("a"))){c.getSelection().selectNode(b)}}};AuIt.Action.Editor.SpecialCmd=Ext.extend(AuIt.Action.Editor.Base,{updateState:function(b){if(b.proxyStates){var a=!b.opt.isEditable;this.setDisabled(a)}else{}},executeCmd:function(){this.editor=null;if(this.actionMgr.fireEvent("beforecmd",this)&&this.editor){if(this.actionMgr.isProxy){var a=this.actionMgr;a.fireEvent("cmd",this)}else{this.actionMgr.postMessage(this,this.editor.proxy)}}this.editor=null}});AuIt.Action.Element.IMG_RESET={baseClass:AuIt.Action.Editor.SpecialCmd,tooltip:AuIt.locale.IMG_RESET,scale:"small",iconCls:"elm-element-imgreset-16",itemId:"ELEMENT_IMG_RESET",updateState:function(b){var a=true;if(b.opt){a=(b.opt.tagName!="IMG")}this.setDisabled(a)}};AuIt.Action.Editor.INTERN_SELECTNODE={baseClass:AuIt.Action.Editor.SpecialCmd,itemId:"INTERN_SELECTNODE"};AuIt.Action.Editor.INTERN_REPLACEHTMLBLOCK={baseClass:AuIt.Action.Editor.SpecialCmd,itemId:"INTERN_REPLACEHTMLBLOCK"};AuIt.Action.Editor.INTERN_SETSTOREMODE={baseClass:AuIt.Action.Editor.SpecialCmd,itemId:"INTERN_SETSTOREMODE"};AuIt.Action.Editor.INTERN_MAIN_TAB_CHANGE={baseClass:AuIt.Action.Editor.SpecialCmd,itemId:"INTERN_MAIN_TAB_CHANGE"};AuIt.Action.Element.DEL={baseClass:AuIt.Action.Editor.SpecialCmd,tooltip:AuIt.locale.ELEMENT_DEL,scale:"small",iconCls:"elm-element-del-16",itemId:"ELEMENT_DEL",updateState:function(b){var a=true;if(b.proxyStates&&b.opt&&b.opt.tagName){a=false}this.setDisabled(a)}};AuIt.Action.Editor.SAVE={scale:"large",iconAlign:"bottom",arrowAlign:"right",text:AuIt.locale.Editor_SAVEM,tooltip:AuIt.locale.Editor_SAVE,itemId:"SAVE",disabled:true,iconCls:"edit-save-24",rowspan:2,addSaveData:function(a){this._data.push(a)},executeCmd:function(){var b=this;if(b.actionMgr.isProxy){b.data=[];b._data=[];if(b.actionMgr.fireEvent("beforecmd",b)){b.beforeCmd();b.actionMgr.fireEvent("beforerequest",b);b.data=b._data}this.answer()}else{b.canSave=true;b._data=[];var a=AuIt.App.getActiveEditor();b.actionMgr.quest(b,a.proxy,function(){b._data=b.data;b.actionMgr.request(b,{url:AUIT_EDITOR.save_html_url,waitMsg:true,params:{action:"savedata",data:b._data}})},b)}},updateState:function(){this.cancmd=0;this.setDisabled(!this.actionMgr.fireEvent("queryState",this)||!this.cancmd)}};AuIt.Action.Editor.SAVEALL={actionGroup:"EDITOR2",scale:"large",iconAlign:"bottom",arrowAlign:"right",tooltip:AuIt.locale.Editor_SAVEALL,rowspan:1,text:AuIt.locale.Editor_SAVEALLM,itemId:"SAVEALL",disabled:true,iconCls:"edit-saveall-24",addSaveData:function(a){this._data.push(a)},executeCmd:function(){var b=this;if(b.actionMgr.isProxy){b.data=[];b._data=[];if(b.actionMgr.fireEvent("beforecmd",b)){b.beforeCmd();b.actionMgr.fireEvent("beforerequest",b);b.data=b._data}this.answer()}else{b.canSave=true;b._data=[];var a=AuIt.App.getActiveEditor();b.actionMgr.quest(b,a.proxy,function(){b._data=b.data;b.actionMgr.request(b,{url:AUIT_EDITOR.save_html_url,waitMsg:true,params:{action:"savedata",data:b._data}})},b)}},updateState:function(){this.cancmd=0;this.setDisabled(!this.actionMgr.fireEvent("queryState",this)||!this.cancmd)}};Ext.namespace("AuIt.Action.cms");AuIt.Action.cms.STATIC_BLOCKS_DUP={text:AuIt.locale.cms_STATIC_BLOCKS_DUPM,p:1,tooltip:AuIt.locale.cms_STATIC_BLOCKS_DUPT,disabled:false,executeCmd:function(){AuIt.Editor.Dialog.Blocks()},scale:"small",iconCls:"cms-dup-16",itemId:"STATIC_BLOCKS_DUP",executeCmd:function(){var b=this;if(b.actionMgr.isProxy){}else{if(this["x"]()){return}var a=AuIt.App.getActiveEditor();if(this.curpageId&&a){if(a.isDirty()){Ext.Msg.show({title:" ",msg:AuIt.locale.cms_STATIC_BLOCKS_DUPS,buttons:Ext.MessageBox.OK,width:300});return}this.actionMgr.request(this,{url:AUIT_EDITOR.cms_page_url,directCall:true,waitMsg:true,params:{action:"cms_dupblock",page_id:this.curpageId,forStoreId:this.forStoreId,fromStoreId:this.fromStoreId},LoadSuccess:function(c,d){}})}}},updateState:function(c){var b=true;this.curpageId=0;if(c.blockData){var a=AuIt.App.getActiveEditor();if(a){var e=a.getBlockProperty(c.blockData.DomID);if(e&&e.pagedata.factory=="CMSBlock"){var d=e.pagedata;if(d.data.data.store_id==0||d.storeId!=d.data.data.store_id){if(!d.data.modifiedData||d.data.modifiedData.store_id!=d.storeId){this.curpageId=d.page_id;this.forStoreId=d.storeId;this.fromStoreId=d.data.data.store_id;b=false}}}}}this.setDisabled(this.x(b))}};Ext.namespace("AuIt.Action.Css");AuIt.Action.Css.SET={baseClass:AuIt.Action.Editor.SpecialCmd,actionGroup:"EDITOR",itemId:"CSS_SET"};AuIt.Action.Css.RESET={baseClass:AuIt.Action.Editor.SpecialCmd,disabled:true,tooltip:AuIt.locale.Css_RESET,scale:"small",iconCls:"elm-css-reset-16",itemId:"CSS_RESET",updateState:function(b){var a=true;if(b.opt){if(b.opt.isEditable&&b.opt.tagName&&(b.opt.cssText||b.opt.className)){a=false}}this.setDisabled(a)}};Ext.namespace("AuIt.Action.InlineBlock");AuIt.Action.InlineBlock.DEL={baseClass:AuIt.Action.Editor.SpecialCmd,tooltip:AuIt.locale.InlineBlock_DEL,scale:"small",iconCls:"elm-inlineblock-del-16",itemId:"INLINEBLOCK_DEL",disabled:false,updateState:function(a){}};