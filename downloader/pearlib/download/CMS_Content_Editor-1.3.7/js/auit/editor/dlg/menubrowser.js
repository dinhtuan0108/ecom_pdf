Ext.namespace("AuIt.Editor");Ext.namespace("AuIt.Editor.Tree");AuIt.Editor.Tree.menu=Ext.extend(Ext.tree.TreePanel,{title:AuIt.locale.TRME_title,iconCls:"page-cms-folder-16",border:false,useArrows:true,autoScroll:true,rootVisible:false,initComponent:function(){this.loader=new Ext.tree.TreeLoader({url:AUIT_EDITOR.menu_url+"?isAjax=true",baseParams:{store:0},listeners:{beforeload:{fn:function(c,a,b){c.baseParams.action="get-category";c.baseParams.form_key=FORM_KEY;c.baseParams.id=a.id},scope:this},load:{fn:function(a,c,b){b=Ext.decode(b.responseText);if(b&&b["0"]&&b["0"].navto){}},scope:this}}});AuIt.Editor.Tree.menu.superclass.initComponent.call(this);this.root=this.setRootNode(new Ext.tree.AsyncTreeNode({text:"Root",expanded:true,id:"ROOT"}));this.on("click",this.onClick,this);this.getSelectionModel().on("selectionchange",function(b,a){},this)},onClick:function(a,b){},searchNode:function(b,a){var c=null;b.eachChild(function(d){if(d.attributes.page_id==a){c=d;return false}c=this.searchNode(d,a);if(c){return false}},this);return c}});AuIt.Editor.MenuBrowser=Ext.extend(Ext.Panel,{fields:{},onWinHide:function(){if(this.cfg.onHide){this.cfg.onHide.call(this.cfg.scope,this.cfg)}},onFinish:function(){if(this.cfg.onFinsh){var a=this.fields.Adress.getValue();var b=[];b.push({directive:a,url:(a==this.fields.Adress.urlstamp)?this.fields.Adress.urlX:a});this.cfg.onFinsh.call(this.cfg.scope,b,this.cfg)}},initComponent:function(){var b=this;this.tree=new AuIt.Editor.Tree.menu({onClick:function(c,d){}});var a=Ext.apply(this.initialConfig,{title:AuIt.locale.MB_title,layout:"border",items:[{region:"west",border:false,frame:false,width:150,autoScroll:false,layout:"fit",split:true,collapseMode:"mini",items:this.tree},{border:false,frame:false,region:"center",layout:"fit"}]});Ext.apply(this,a);AuIt.Editor.MenuBrowser.superclass.initComponent.apply(this,arguments)}});AuIt.Editor.menuDlg=function(){var a;return{show:function(d,c){if(!a){var b=new AuIt.Editor.MenuBrowser({modal:true,closeAction:"hide",width:700,height:400,cfg:c,buttons:[{text:AuIt.locale.OK,handler:function(){a.hide();b.onFinish()},scope:this},{text:AuIt.locale.CANCEL,handler:function(){a.hide()},scope:this}],keys:{key:27,handler:function(){a.hide()},scope:this},listeners:{hide:{fn:function(){b.onWinHide()},scope:this}}});a=new AuIt.ModalWindow(b);a.browser=b}else{a.browser.cfg=c}a.show();if(c.directive){a.browser.fields.Adress.setDirective(c.directive)}}}}();