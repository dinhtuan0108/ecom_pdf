function MirrorFrame(a,c){this.home=document.createElement("DIV");if(a.appendChild){a.appendChild(this.home)}else{a(this.home)}var b=this;function d(e,g){var f=document.createElement("INPUT");f.type="button";f.value=e;b.home.appendChild(f);f.onclick=function(){b[g].call(b)}}d("Search","search");d("Replace","replace");d("Current line","line");d("Jump to line","jump");d("Insert constructor","macro");d("Indent all","reindent");this.mirror=new CodeMirror(this.home,c)}MirrorFrame.prototype={search:function(){var c=prompt("Enter search term:","");if(!c){return}var b=true;do{var a=this.mirror.getSearchCursor(c,b);b=false;while(a.findNext()){a.select();if(!confirm("Search again?")){return}}}while(confirm("End of document reached. Start over?"))},replace:function(){var c=prompt("Enter search string:",""),b;if(c){b=prompt("What should it be replaced with?","")}if(b==null){return}var a=this.mirror.getSearchCursor(c,false);while(a.findNext()){a.replace(b)}},jump:function(){var a=prompt("Jump to line:","");if(a&&!isNaN(Number(a))){this.mirror.jumpToLine(Number(a))}},line:function(){alert("The cursor is currently at line "+this.mirror.currentLine());this.mirror.focus()},macro:function(){var a=prompt("Name your constructor:","");if(a){this.mirror.replaceSelection("function "+a+"() {\n  \n}\n\n"+a+".prototype = {\n  \n};\n")}},reindent:function(){this.mirror.reindent()}};