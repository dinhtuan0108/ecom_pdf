Ext.namespace("AuIt.Editor.Gallery");AuIt.Editor.GalleryView=Ext.extend(Ext.DataView,{border:false,frame:false,cls:"snm-gallery",itemSelector:"dd",overClass:"over",selectedClass:"selected",singleSelect:true,onClick:function(b){var a=b.getTarget("h2",3,true);if(a){a.up("div").toggleClass("collapsed")}return AuIt.Editor.GalleryView.superclass.onClick.apply(this,arguments)},initComponent:function(){this.tpl=new Ext.XTemplate("<div>",'<tpl for=".">','<div><a name="{id}"></a><h2><div>{title}</div></h2>','<dl class="snm-gallery ">','<tpl for="items">','<dd class="x-btn-group snm-gallery-item" >','<div class="x-btn-group-tl">','<div class="x-btn-group-tr">','<div class="x-btn-group-tc">','<div class="x-btn-group-header x-unselectable" >','<span class="x-btn-group-header-text" >{name}</span>',"</div>","</div>","</div>","</div>",'<div class="x-btn-group-bwrap" >','<div class="x-btn-group-ml">','<div class="x-btn-group-mr x-btn-group-mc x-btn-group-body">','<tpl if="this.hasImage(values.image)">','<h3><img src="'+AUIT_EDITOR.file_browser_root.preview_url+'{image}"/>&#160;</h3>',"</tpl>","<p>{description}</p>","</div>","</div>",'<div class="x-btn-group-bl x-panel-nofooter" >','<div class="x-btn-group-br">','<div class="x-btn-group-bc"></div>',"</div>","</div>","</div>","</dd>","</tpl>",'<div style="clear:left"></div></dl></div>',"</tpl>","</div>",{hasImage:function(a){return(a!=="")}});return AuIt.Editor.GalleryView.superclass.initComponent.call(this)}});AuIt.Editor.Gallery.Container=Ext.extend(Ext.Panel,{modified:false,border:false,frame:false,layout:"fit",autoScroll:true,getSelectedRecord:function(){var a=this.view.getSelectedIndexes();if(a.length>0){return this.getRecordForIdx(a[0])}return null},getDataSource:function(e){var c,a;var d=[],b=[];for(a in e){if(e.hasOwnProperty(a)){c=e[a].menu;if(!e[a].name||(!e[a].template&&!e[a].style&&!e[a].classname)){continue}if(c==""){c="No Group"}if(!d[c]){d[c]={title:c,items:[]};b.push(d[c])}e[a].key=a;d[c].items.push(e[a])}}b.sort(function(g,f){if(g.title==f.title){return 0}return(g.title<f.title?-1:1)});for(a=0;a<b.length;a++){b[a].items.sort(function(g,f){if(g.name==f.name){return 0}return(g.name<f.name?-1:1)})}return b},destroy:function(){AuIt.App.getActionMgr().un("itemchanged",this.onItemChanged,this);AuIt.App.getActionMgr().un("cmd",this.onCmd,this);AuIt.Editor.Gallery.Container.superclass.destroy.call(this)},onCmd:function(a){},onItemChanged:function(a){if(!a.editor){return}if(this.view){}},getRecordForIdx:function(a){var b=null;this.store.each(function(c){Ext.each(c.data.items,function(d){if(!a){b=d;return false}a--});if(b){return false}});return b},onMouseEnter:function(a){},onMouseLeave:function(a){},onSelectionChange:function(a){},onDblClick:function(){},onClick:function(){},getToolbar:function(){return null},initComponent:function(){if(this.altKey){AuIt.App.addFktKey({alt:true,key:this.altKey,el:this})}this.tbar=this.getToolbar();AuIt.App.getActionMgr().on("itemchanged",this.onItemChanged,this);AuIt.App.getActionMgr().on("cmd",this.onCmd,this);this.store=new Ext.data.JsonStore({idProperty:"id",fields:["id","title","items"],data:this.getDataSource()});this.items=this.view=new AuIt.Editor.GalleryView({store:this.store,disabled:false,listeners:{selectionchange:function(a,b){},scope:this,dblclick:function(a,b,d,f){var c=this.getRecordForIdx(b);if(c){this.onDblClick(c)}},click:function(a,b,d,f){var c=this.getRecordForIdx(b);if(c){this.onClick(c)}},selectionchange:function(a,b){this.onSelectionChange(b)},mouseenter:function(a,b,d,f){var c=this.getRecordForIdx(b);if(c){this.onMouseEnter(c)}},mouseleave:function(a,b,d,f){var c=this.getRecordForIdx(b);if(c){this.onMouseLeave(c)}}}});AuIt.Editor.Gallery.Container.superclass.initComponent.call(this)}});