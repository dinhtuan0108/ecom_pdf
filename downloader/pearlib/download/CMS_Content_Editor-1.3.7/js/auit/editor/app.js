Ext.namespace("AuIt.Editor.Frame");AuIt.Action.Editor.BLOCK_CMS={scale:"large",rowspan:2,text:AuIt.locale.BLOCK_CMSM,itemId:"BLOCK_CMS",disabled:false,iconAlign:"bottom",iconCls:"edit-cms-32",initComponent:function(){var a=this.baseAction.actionMgr;this.menu=new Ext.menu.Menu({items:[a.getAction("NEW","cms"),a.getAction("DUP","cms"),"-",a.getAction("DEL","cms")]});this.constructor.superclass.initComponent.call(this)}};AuIt.Action.Editor.HELP={scale:"large",rowspan:2,text:"&#160;&#160;&#160;&#160;&#160;&#160;&#160;",itemId:"HELP",disabled:false,iconAlign:"bottom",iconCls:"edit-help-32",executeCmd:function(){try{if(this.helpWindow){this.helpWindow.close()}}catch(a){}this.helpWindow=window.open("http://download.snm-portal.de/help/editor/","SNM-EDITOR-HELP","width=980,height=600,scrollbars=yes,toolbar=yes")}};AuIt.Action.Editor.BLOCK_BLOCK={scale:"large",rowspan:2,text:AuIt.locale.BLOCK_BLOCKM,itemId:"BLOCK_BLOCK",disabled:false,iconAlign:"bottom",iconCls:"edit-blocks-32",initComponent:function(){var a=this.baseAction.actionMgr;this.menu=new Ext.menu.Menu({items:[a.getAction("BLOCKS","cms"),a.getAction("STATIC_BLOCKS_DUP","cms")]});this.constructor.superclass.initComponent.call(this)}};AuIt.Action.Editor.BLOCK_MENU={scale:"large",rowspan:2,text:AuIt.locale.BLOCK_MENUM,itemId:"BLOCK_MENU",disabled:false,iconAlign:"bottom",iconCls:"edit-menu-32",initComponent:function(){var a=this.baseAction.actionMgr;this.menu=new Ext.menu.Menu({items:[a.getAction("MAIN","menu")]});this.constructor.superclass.initComponent.call(this)}};AuIt.Action.Editor.BLOCK_CATEGORIE={scale:"large",rowspan:2,text:AuIt.locale.BLOCK_CATEGORIEM,itemId:"BLOCK_CATEGORIE",disabled:true,iconAlign:"bottom",iconCls:"edit-categorie-32",initComponent:function(){var a=this.baseAction.actionMgr;this.menu=new Ext.menu.Menu({items:[]});this.constructor.superclass.initComponent.call(this)}};AuIt.Action.Editor.BLOCK_PRODUCT={scale:"large",rowspan:2,text:AuIt.locale.BLOCK_PRODUCTM,itemId:"BLOCK_PRODUCT",disabled:true,iconAlign:"bottom",iconCls:"edit-product-32",initComponent:function(){var a=this.baseAction.actionMgr;this.menu=new Ext.menu.Menu({items:[]});this.constructor.superclass.initComponent.call(this)}};Ext.namespace("AuIt.Action.ToolBar.Editor");AuIt.Action.ToolBar.Editor.MAIN=function(b){function a(){var c=[];if(AuIt.App.l!=1){c.push({disable:true,xtype:"box",html:'<div ext:qtip="<b>Do you like the extension?</b><br/>Then support us with a donation." style="height:65px;"><form style="padding-top:25px" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank"><input type="hidden" name="cmd" value="_s-xclick"><input type="hidden" name="hosted_button_id" value="JMNVMP87URQVE"><input type="image" src="'+AUIT_EDITOR.js_url+'auit/editor/images/btn_donate_SM.gif" border="0" name="submit" alt="PayPal"></form></div>'})}c.push({tooltip:AuIt.locale.MQuestion,iconAlign:"bottom",handler:function(){window.open("http://www.snm-portal.de/contacts","_blank")},icon:AuIt.App.logo(),iconCls:"toolbar-logo",itemId:"CONTACT"});return{xtype:"buttongroup",height:80,columns:2,items:c}}return new Ext.Toolbar({items:[{xtype:"buttongroup",title:AuIt.locale.MG1,height:80,columns:4,defaults:{scale:"large",iconAlign:"bottom",arrowAlign:"right"},items:[b.getAction("BLOCK_CMS"),b.getAction("BLOCK_CMS"),b.getAction("BLOCK_BLOCK"),b.getAction("BLOCK_MENU"),b.getAction("BLOCK_BLOG")]},{xtype:"buttongroup",title:AuIt.locale.MG2,columns:4,height:80,defaults:{scale:"large",iconAlign:"bottom",arrowAlign:"right"},items:[b.getAction("SAVEALL"),b.getAction("SAVE")]},{xtype:"buttongroup",title:AuIt.locale.MG3,columns:1,height:80,defaults:{scale:"large",iconAlign:"bottom",arrowAlign:"right"},items:[b.getAction("STOREVIEW"),b.getAction("STOREATTRIBUTE"),b.getAction("STORECHECKBOX")]},{xtype:"buttongroup",title:AuIt.locale.MG4,columns:4,height:80,defaults:{scale:"small",iconAlign:"bottom"},bodyStyle:"padding:12px 0px 0px;",items:[b.getAction("CMD_REDO","Editor"),b.getAction("CMD_UNDO","Editor"),b.getAction("CMD_SOURCEEDIT","Editor"),b.getAction("SHOWOMS"),b.getAction("CMD_SELECTALL","Editor"),b.getAction("IMG_RESET","Element"),b.getAction("RESET","Css"),b.getAction("DEL","Element")]},{xtype:"buttongroup",title:AuIt.locale.MG5,columns:5,height:80,defaults:{scale:"small"},bodyStyle:"padding:12px 0px 0px;",items:[b.getAction("CMD_BOLD","Editor"),b.getAction("CMD_ITALIC","Editor"),b.getAction("CMD_UNDERLINE","Editor"),b.getAction("CMD_SUPERSCRIPT","Editor"),b.getAction("CMD_SUBSCRIPT","Editor"),b.getAction("CMD_DECREASEFONTSIZE","Editor"),b.getAction("CMD_INCREASEFONTSIZE","Editor"),b.getAction("CMD_FORECOLOR","Editor"),b.getAction("CMD_REMOVEFORMAT","Editor"),b.getAction("CMD_STRIKETHROUGH","Editor")]},{xtype:"buttongroup",title:AuIt.locale.MG6,columns:5,height:80,defaults:{scale:"small"},bodyStyle:"padding:12px 0px 0px;",items:[b.getAction("CMD_JUSTIFYLEFT","Editor"),b.getAction("CMD_JUSTIFYCENTER","Editor"),b.getAction("CMD_JUSTIFYRIGHT","Editor"),b.getAction("CMD_INSERTUNORDEREDLIST","Editor"),b.getAction("CMD_INSERTORDEREDLIST","Editor"),b.getAction("CMD_INDENT","Editor"),b.getAction("CMD_OUTDENT","Editor")]},{xtype:"buttongroup",title:AuIt.locale.MG7,columns:6,height:80,defaults:{scale:"small"},bodyStyle:"padding:12px 0px 0px;",items:[b.getAction("CMD_FORMAT_H1"),b.getAction("CMD_FORMAT_H2"),b.getAction("CMD_FORMAT_H3"),b.getAction("CMD_FORMAT_H4"),b.getAction("CMD_FORMAT_H5"),b.getAction("CMD_FORMAT_H6"),b.getAction("CMD_FORMAT_PAR"),b.getAction("CMD_FORMAT_PRE")]},{xtype:"buttongroup",title:AuIt.locale.MG8,columns:3,height:80,defaults:{scale:"small"},bodyStyle:"padding:12px 0px 0px;",items:[b.getAction("CMD_INSERTIMAGE","Editor"),b.getAction("CMD_INSERTWIDGET","Editor"),b.getAction("CMD_INSERTCUSTOMCHAR","Editor"),b.getAction("CMD_CREATELINK","Editor"),b.getAction("CMD_UNLINK","Editor")]},{xtype:"buttongroup",title:AuIt.locale.HELP,height:80,columns:1,defaults:{scale:"large",iconAlign:"bottom",arrowAlign:"right"},items:[b.getAction("HELP")]},"->",a()]})};AuIt.Editor.Frame=function(a){this.initStateProvider();Ext.apply(this,a);AuIt.Editor.Frame.superclass.constructor.apply(this,arguments)};Ext.extend(AuIt.Editor.Frame,Ext.util.Observable,{initStateProvider:function(){Ext.QuickTips.init();Ext.apply(Ext.QuickTips.getQuickTip(),{maxWidth:200,minWidth:100,showDelay:50,trackMouse:true});var a,c="";if(c){var b=new Date();b.setTime(b.getTime()+(c*24*60*60*1000));a="; expires="+b.toGMTString()}else{a=null}Ext.state.Manager.setProvider(new Ext.state.CookieProvider({path:"/",expires:a,domain:null,secure:false}))},getActionMgr:function(){if(!this.actionMgr){this.actionMgr=new AuIt.ActionMgr({modul:"Editor"})}return this.actionMgr},closeWindow:function(c,b){var a;if(this.mainTab){this.mainTab.items.each(function(d){if(d.window_id==c){a=d;return false}});if(a){this.mainTab.remove(a,true)}}},addEditQuery:function(a){return a},openWindow:function(c,b){var a;if(this.mainTab){this.mainTab.items.each(function(d){if(d.window_id==c){a=d;return false}});if(a){this.mainTab.setActiveTab(a);return}}a=this.getNewEditorPanel(c,b);this.mainTab.add(a);this.mainTab.setActiveTab(a)},getActiveEditor:function(){if(this.mainTab){return this.mainTab.getActiveTab()}return null},getNewEditorPanel:function(b,a){a=this.addEditQuery(a);return new AuIt.Editor.Panel({window_id:b,layout:"fit",title:Ext.util.Format.ellipsis(""+a,35),tabTip:a,url:a,shim:true,closable:true})},unsetPropertyPanel:function(a){var b;if(a&&this.propertyPanel&&(b=a.getPanelData())){if(this.propertyPanel.items.first()==b.panel){this.setPropertyPanel(null)}}},setPropertyPanel:function(b,d){if(!this.propertyPanel||!Ext.Element._flyweights){return}var g;var c=this.propertyPanel.removeAll(false);Ext.each(c,function(i){try{i.hide()}catch(h){}});try{if(b&&b.getPanelData&&(g=b.getPanelData())&&g.panel){this.propertyPanel.add(g.panel);g.panel.show();this.propertyPanel.setTitle(this.propertyPanel.titleP+g.title,g.iconcls);var a=Ext.getCmp("AUIT_APP_FRAME_EAST_ACCORDION");if(d===true){a.getLayout().setActiveItem(this.propertyPanel)}}else{this.propertyPanel.setTitle(this.propertyPanel.titleP,"page-empty-16")}this.propertyPanel.doLayout(false,true)}catch(f){}},checkBrowser:function(){if(!Ext.isGecko3||((navigator.userAgent.match(/Firefox\/(\d+\.\d+)/)[1])||NaN)<3.5){Ext.Msg.alert("Attention!","This version is currently released only for the Firefox browser, version >= 3.5.");return false}return true},startPing:function(){var a=30000;var b=function(){var c=new Image();c.src=AUIT_EDITOR.ping_url+"?"+(new Date().getTime());setTimeout(b,a)};setTimeout(b,a)},removeSplash:function(){var a=Ext.get(window.parent.document.getElementById("AUIT_SPLASHI"));if(a){a.animate.defer(50,a,[{opacity:{to:0}},1,function(){a.remove()}])}},init:function(){if(this.initial){return}this.initial=true;if(!this.checkBrowser()){this.removeSplash();return}this.dragDrop=new AuIt.HTML5DragDrop();this.altKeyMap={};this.bb=new Ext.ux.StatusBar({defaultText:"Ready",statusAlign:"right",items:[],height:26,plugins:[new AuIt.Editor.htmlXPathStatus()]});this.mainTab=new Ext.TabPanel({border:false,frame:false,enableTabScroll:true,deferredRender:true,activeTab:0,items:[this.getNewEditorPanel("CMSPage_"+AUIT_EDITOR.home_page_id,AUIT_EDITOR.web_url)],listeners:{add:{fn:function(e,d,c){d.on("destroy",function(f){if(f==this.activeTab){AuIt.App.getActionMgr().setMainPanel(null);this.activeTab=null}},this)}},beforetabchange:{fn:function(c,e,d){if(!AuIt.App.getActionMgr().fireEvent("beforecmd",{actionGroup:"EDITOR2",itemId:"MAIN_TAB_CHANGE",currentTab:d,newTab:e})){return false}return true},scope:this},tabchange:{fn:function(d,c){AuIt.App.getActionMgr().setMainPanel(c)}},beforeremove:{fn:function(d,c){if(c&&c.checkBeforeClosing){if(!c.checkBeforeClosing({go:function(){AuIt.App.mainTab.remove(c,true)}})){return false}}}}}});var b={id:"unpin",qtip:"Undock from sidebar",handler:function(e,d,c){c.undock()}};this.htmlProps=new AuIt.Editor.htmlProperty.Container({dockIndex:3,tools:[b]});this.propertyPanel=new Ext.Panel({dockIndex:1,id:"AUIT_PROPERTYPANEL_M1",layout:"fit",region:"center",border:false,frame:false,title:"<b><u>O</u></b>bject: ",titleP:"<b><u>O</u></b>bject: ",altKey:"O",items:[],tools:[b]});AuIt.App.addFktKey({alt:true,key:this.propertyPanel.altKey,el:this.propertyPanel});this.treesCms=new Ext.Panel({dockIndex:2,tbar:AuIt.App.getActionMgr().getToolBar("CMS","Short2"),border:false,frame:false,autoScroll:true,id:"AUIT_TREE_CMSPAGE_M1",title:"<b><u>N</u></b>avigator - CMS Pages",altKey:"N",iconCls:"page-cms-folder-16",tools:[b],items:[new AuIt.Editor.Tree.cmsPage(),new AuIt.Editor.Tree.category(),new AuIt.Editor.Tree.specialLinks()]});AuIt.App.addFktKey({alt:true,key:"N",el:this.treesCms});this.mainPanel=new Ext.Panel({layout:"border",useshim:true,bbar:this.bb,tbar:this.getActionMgr().getToolBar("MAIN"),items:[{id:"AUIT_APP_FRAME_EAST_ACCORDION",split:true,width:240,minSize:240,maxSize:460,region:"east",border:false,frame:false,layout:"accordion",layoutConfig:{animate:false,sequence:false},items:[this.propertyPanel,this.treesCms,this.htmlProps,new AuIt.Editor.Gallery.PageParts({dockIndex:4,tools:[b]}),new AuIt.Editor.Gallery.StylisticSets({dockIndex:5,tools:[b]})]},{id:"AUIT_APP_FRAME_EAST_CENTER",region:"center",border:false,frame:false,layout:"fit",items:this.mainTab}]});var a=new Ext.Viewport({layout:"fit",items:this.mainPanel});this.startPing();this.addKeyMap(document);this.removeSplash()},showPanel:function(d){var b,a=d.split("/");for(b=0;b<a.length;b++){d=a[b];var c=Ext.getCmp(d);if(c){c.expand();c.show()}}},addFktKey:function(a){this.altKeyMap[a.key]=a},showKeyPanel:function(b){var a=null;Ext.each(b,function(d){if((map=this.altKeyMap[d])){a=map.el;map.el.show();map.el.expand()}},this);return a},getShortKeyMap:function(){var b={};for(var a in this.altKeyMap){b[a]=1}return b},globalKeys:function(b){if(b.keyCode==b.F1){this.handleKeyCode("GF1");b.preventDefault();return}if(!b.altKey){return}var a,d=b.getCharCode();if(d>0){d=String.fromCharCode(d);this.handleKeyCode(d);b.preventDefault()}},handleKeyCode:function(b){if(b=="GF1"){this.getActionMgr.getAction("HELP","Editor").executeCmd();return}var a;if((a=this.altKeyMap[b])){a.el.show();a.el.expand()}},addKeyMap:function(a){Ext.EventManager.on(a,"keydown",this.globalKeys,this)},removeKeyMap:function(a){Ext.EventManager.un(a,"keydown",this.globalKeys,this)},translate:function(a){return a},logo:function(a){return"http://feed.snm-portal.de/toolbar-logo.png?"+AUIT_EDITOR.lic},avi:function(){return document.AUIT_AVI_UPLOAD},isReady:function(){return true},setIFrame:function(a){this.lastIframeWindow=a;return true}});